---
import BaseLayout from '@/components/layouts/BaseLayout.astro'
import { formatDateRange } from '@/lib/formatters'
import { getCollection } from 'astro:content'

const education = await getCollection('education')
education.sort(
  (a, b) => b.data.startDate.getTime() - a.data.startDate.getTime()
)
---

<BaseLayout title='Education' description='asd'>
  <h2 transition:name='education' class='w-fit'>Education</h2>
  {
    education.map(async (item, index) => {
      const { Content } = await item.render()

      return (
        <div>
          <h3>
            {item.data.title} @ {item.data.institution}
          </h3>
          <i>{formatDateRange(item.data.startDate, item.data.endDate)}</i>
          <Content />
          {index !== education.length - 1 && <hr />}
        </div>
      )
    })
  }
</BaseLayout>
